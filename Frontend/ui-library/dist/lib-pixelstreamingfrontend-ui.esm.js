import*as t from"@epicgames-ps/lib-pixelstreamingfrontend-ue5.4";import*as e from"jss";import*as s from"jss-plugin-global";import*as i from"jss-plugin-camel-case";var n={d:(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},o={};n.d(o,{ym:()=>b,EW:()=>h,Mx:()=>W,L3:()=>Q,rl:()=>m,NR:()=>u,f1:()=>v,IY:()=>E,RZ:()=>d,XY:()=>q,Fk:()=>g,Zh:()=>N,ek:()=>B,MG:()=>z,gE:()=>D,tW:()=>U,wr:()=>p,QT:()=>c});const l=(a={CandidatePairStats:()=>t.CandidatePairStats,Flags:()=>t.Flags,Logger:()=>t.Logger,NumericParameters:()=>t.NumericParameters,OptionParameters:()=>t.OptionParameters,SettingFlag:()=>t.SettingFlag,TextParameters:()=>t.TextParameters,WebXRController:()=>t.WebXRController},r={},n.d(r,a),r);var a,r,c;class d{constructor(t,e,s){this.rootDiv=t,this.rootElement=e,this.textElement=s,this.rootElement.appendChild(this.textElement),this.hide(),this.rootDiv.appendChild(this.rootElement)}show(){this.rootElement.classList.remove("hiddenState")}hide(){this.rootElement.classList.add("hiddenState")}}class h extends d{constructor(t,e,s){super(t,e,s),this.onActionCallback=()=>{l.Logger.Info(l.Logger.GetStackTrace(),"Did you forget to set the onAction callback in your overlay?")}}update(t){null==t&&null==t||(this.textElement.innerHTML=t)}onAction(t){this.onActionCallback=t}activate(){this.onActionCallback()}}class m extends h{static createRootElement(){const t=document.createElement("div");return t.id="connectOverlay",t.className="clickableState",t}static createContentElement(){const t=document.createElement("div");return t.id="connectButton",t.innerHTML="Click to start",t}constructor(t){super(t,m.createRootElement(),m.createContentElement()),this.rootElement.addEventListener("click",(()=>{this.activate()}))}}class u extends h{static createRootElement(){const t=document.createElement("div");return t.id="disconnectOverlay",t.className="clickableState",t}static createContentElement(){const t=document.createElement("div");return t.id="disconnectButton",t.innerHTML="Click To Restart",t}constructor(t){super(t,u.createRootElement(),u.createContentElement()),this.rootElement.addEventListener("click",(()=>{this.activate()}))}}class g extends h{static createRootElement(){const t=document.createElement("div");return t.id="playOverlay",t.className="clickableState",t}static createContentElement(){const t=document.createElement("img");return t.id="playButton",t.src="data:image/png;base64,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",t.alt="Start Streaming",t}constructor(t){super(t,g.createRootElement(),g.createContentElement()),this.rootElement.addEventListener("click",(()=>{this.activate()}))}}class p extends d{constructor(t,e,s){super(t,e,s)}update(t){null==t&&null==t||(this.textElement.innerHTML=t)}}class E extends p{static createRootElement(){const t=document.createElement("div");return t.id="infoOverlay",t.className="textDisplayState",t}static createContentElement(){const t=document.createElement("div");return t.id="messageOverlayInner",t}constructor(t){super(t,E.createRootElement(),E.createContentElement())}}class v extends p{static createRootElement(){const t=document.createElement("div");return t.id="errorOverlay",t.className="textDisplayState",t}static createContentElement(){const t=document.createElement("div");return t.id="errorOverlayInner",t}constructor(t){super(t,v.createRootElement(),v.createContentElement())}}class b extends h{static createRootElement(){const t=document.createElement("div");return t.id="afkOverlay",t.className="clickableState",t}static createContentElement(){const t=document.createElement("div");return t.id="afkOverlayInner",t.innerHTML='<center>No activity detected<br>Disconnecting in <span id="afkCountDownNumber"></span> seconds<br>Click to continue<br></center>',t}constructor(t){super(t,b.createRootElement(),b.createContentElement()),this.rootElement.addEventListener("click",(()=>{this.activate()}))}updateCountdown(t){this.textElement.innerHTML=`<center>No activity detected<br>Disconnecting in <span id="afkCountDownNumber">${t}</span> seconds<br>Click to continue<br></center>`}}class y{get rootElement(){return this._rootElement}set rootElement(t){t.onclick=()=>this.toggleFullscreen(),this._rootElement=t}constructor(){this.isFullscreen=!1,document.addEventListener("webkitfullscreenchange",(()=>this.onFullscreenChange()),!1),document.addEventListener("mozfullscreenchange",(()=>this.onFullscreenChange()),!1),document.addEventListener("fullscreenchange",(()=>this.onFullscreenChange()),!1),document.addEventListener("MSFullscreenChange",(()=>this.onFullscreenChange()),!1)}toggleFullscreen(){if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{const t=this.fullscreenElement;if(!t)return;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitEnterFullscreen&&t.webkitEnterFullscreen()}this.onFullscreenChange()}onFullscreenChange(){this.isFullscreen=document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!==document.msFullscreenElement||document.fullscreenElement&&null!==document.fullscreenElement}}class C extends y{constructor(t){super(),this.rootElement=t}}class f extends y{constructor(){super();const t=document.createElement("button");t.type="button",t.classList.add("UiTool"),t.id="fullscreen-btn",t.appendChild(this.maximizeIcon),t.appendChild(this.minimizeIcon),t.appendChild(this.tooltipText),this.rootElement=t}get tooltipText(){return this._tooltipText||(this._tooltipText=document.createElement("span"),this._tooltipText.classList.add("tooltiptext"),this._tooltipText.innerHTML="Fullscreen"),this._tooltipText}get maximizeIcon(){if(!this._maximizeIcon){this._maximizeIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._maximizeIcon.setAttributeNS(null,"id","maximizeIcon"),this._maximizeIcon.setAttributeNS(null,"x","0px"),this._maximizeIcon.setAttributeNS(null,"y","0px"),this._maximizeIcon.setAttributeNS(null,"viewBox","0 0 384.97 384.97");const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add("svgIcon"),this._maximizeIcon.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M384.97,12.03c0-6.713-5.317-12.03-12.03-12.03H264.847c-6.833,0-11.922,5.39-11.934,12.223c0,6.821,5.101,11.838,11.934,11.838h96.062l-0.193,96.519c0,6.833,5.197,12.03,12.03,12.03c6.833-0.012,12.03-5.197,12.03-12.03l0.193-108.369c0-0.036-0.012-0.06-0.012-0.084C384.958,12.09,384.97,12.066,384.97,12.03z");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M120.496,0H12.403c-0.036,0-0.06,0.012-0.096,0.012C12.283,0.012,12.247,0,12.223,0C5.51,0,0.192,5.317,0.192,12.03L0,120.399c0,6.833,5.39,11.934,12.223,11.934c6.821,0,11.838-5.101,11.838-11.934l0.192-96.339h96.242c6.833,0,12.03-5.197,12.03-12.03C132.514,5.197,127.317,0,120.496,0z");const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d","M120.123,360.909H24.061v-96.242c0-6.833-5.197-12.03-12.03-12.03S0,257.833,0,264.667v108.092c0,0.036,0.012,0.06,0.012,0.084c0,0.036-0.012,0.06-0.012,0.096c0,6.713,5.317,12.03,12.03,12.03h108.092c6.833,0,11.922-5.39,11.934-12.223C132.057,365.926,126.956,360.909,120.123,360.909z");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttributeNS(null,"d","M372.747,252.913c-6.833,0-11.85,5.101-11.838,11.934v96.062h-96.242c-6.833,0-12.03,5.197-12.03,12.03s5.197,12.03,12.03,12.03h108.092c0.036,0,0.06-0.012,0.084-0.012c0.036-0.012,0.06,0.012,0.096,0.012c6.713,0,12.03-5.317,12.03-12.03V264.847C384.97,258.014,379.58,252.913,372.747,252.913z"),t.appendChild(e),t.appendChild(s),t.appendChild(i),t.appendChild(n)}return this._maximizeIcon}get minimizeIcon(){if(!this._minimizeIcon){this._minimizeIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._minimizeIcon.setAttributeNS(null,"id","minimizeIcon"),this._minimizeIcon.setAttributeNS(null,"x","0px"),this._minimizeIcon.setAttributeNS(null,"y","0px"),this._minimizeIcon.setAttributeNS(null,"viewBox","0 0 385.331 385.331");const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add("svgIcon"),this._minimizeIcon.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M264.943,156.665h108.273c6.833,0,11.934-5.39,11.934-12.211c0-6.833-5.101-11.85-11.934-11.838h-96.242V36.181c0-6.833-5.197-12.03-12.03-12.03s-12.03,5.197-12.03,12.03v108.273c0,0.036,0.012,0.06,0.012,0.084c0,0.036-0.012,0.06-0.012,0.096C252.913,151.347,258.23,156.677,264.943,156.665z");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M120.291,24.247c-6.821,0-11.838,5.113-11.838,11.934v96.242H12.03c-6.833,0-12.03,5.197-12.03,12.03c0,6.833,5.197,12.03,12.03,12.03h108.273c0.036,0,0.06-0.012,0.084-0.012c0.036,0,0.06,0.012,0.096,0.012c6.713,0,12.03-5.317,12.03-12.03V36.181C132.514,29.36,127.124,24.259,120.291,24.247z");const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d","M120.387,228.666H12.115c-6.833,0.012-11.934,5.39-11.934,12.223c0,6.833,5.101,11.85,11.934,11.838h96.242v96.423c0,6.833,5.197,12.03,12.03,12.03c6.833,0,12.03-5.197,12.03-12.03V240.877c0-0.036-0.012-0.06-0.012-0.084c0-0.036,0.012-0.06,0.012-0.096C132.418,233.983,127.1,228.666,120.387,228.666z");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttributeNS(null,"d","M373.3,228.666H265.028c-0.036,0-0.06,0.012-0.084,0.012c-0.036,0-0.06-0.012-0.096-0.012c-6.713,0-12.03,5.317-12.03,12.03v108.273c0,6.833,5.39,11.922,12.223,11.934c6.821,0.012,11.838-5.101,11.838-11.922v-96.242H373.3c6.833,0,12.03-5.197,12.03-12.03S380.134,228.678,373.3,228.666z"),t.appendChild(e),t.appendChild(s),t.appendChild(i),t.appendChild(n)}return this._minimizeIcon}onFullscreenChange(){super.onFullscreenChange();const t=this.minimizeIcon,e=this.maximizeIcon;this.isFullscreen?(t.style.display="inline",t.style.transform="translate(0, 0)",e.style.display="none"):(t.style.display="none",e.style.display="inline",e.style.transform="translate(0, 0)")}}class S{get rootElement(){return this._rootElement||(this._rootElement=document.createElement("button"),this._rootElement.type="button",this._rootElement.classList.add("UiTool"),this._rootElement.id="settingsBtn",this._rootElement.appendChild(this.settingsIcon),this._rootElement.appendChild(this.tooltipText)),this._rootElement}get tooltipText(){return this._tooltipText||(this._tooltipText=document.createElement("span"),this._tooltipText.classList.add("tooltiptext"),this._tooltipText.innerHTML="Settings"),this._tooltipText}get settingsIcon(){if(!this._settingsIcon){this._settingsIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._settingsIcon.setAttributeNS(null,"id","settingsIcon"),this._settingsIcon.setAttributeNS(null,"x","0px"),this._settingsIcon.setAttributeNS(null,"y","0px"),this._settingsIcon.setAttributeNS(null,"viewBox","0 0 478.703 478.703");const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add("svgIcon"),this._settingsIcon.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M454.2,189.101l-33.6-5.7c-3.5-11.3-8-22.2-13.5-32.6l19.8-27.7c8.4-11.8,7.1-27.9-3.2-38.1l-29.8-29.8\t\t\tc-5.6-5.6-13-8.7-20.9-8.7c-6.2,0-12.1,1.9-17.1,5.5l-27.8,19.8c-10.8-5.7-22.1-10.4-33.8-13.9l-5.6-33.2\t\t\tc-2.4-14.3-14.7-24.7-29.2-24.7h-42.1c-14.5,0-26.8,10.4-29.2,24.7l-5.8,34c-11.2,3.5-22.1,8.1-32.5,13.7l-27.5-19.8\t\t\tc-5-3.6-11-5.5-17.2-5.5c-7.9,0-15.4,3.1-20.9,8.7l-29.9,29.8c-10.2,10.2-11.6,26.3-3.2,38.1l20,28.1\t\t\tc-5.5,10.5-9.9,21.4-13.3,32.7l-33.2,5.6c-14.3,2.4-24.7,14.7-24.7,29.2v42.1c0,14.5,10.4,26.8,24.7,29.2l34,5.8\t\t\tc3.5,11.2,8.1,22.1,13.7,32.5l-19.7,27.4c-8.4,11.8-7.1,27.9,3.2,38.1l29.8,29.8c5.6,5.6,13,8.7,20.9,8.7c6.2,0,12.1-1.9,17.1-5.5\t\t\tl28.1-20c10.1,5.3,20.7,9.6,31.6,13l5.6,33.6c2.4,14.3,14.7,24.7,29.2,24.7h42.2c14.5,0,26.8-10.4,29.2-24.7l5.7-33.6\t\t\tc11.3-3.5,22.2-8,32.6-13.5l27.7,19.8c5,3.6,11,5.5,17.2,5.5l0,0c7.9,0,15.3-3.1,20.9-8.7l29.8-29.8c10.2-10.2,11.6-26.3,3.2-38.1\t\t\tl-19.8-27.8c5.5-10.5,10.1-21.4,13.5-32.6l33.6-5.6c14.3-2.4,24.7-14.7,24.7-29.2v-42.1\t\t\tC478.9,203.801,468.5,191.501,454.2,189.101z M451.9,260.401c0,1.3-0.9,2.4-2.2,2.6l-42,7c-5.3,0.9-9.5,4.8-10.8,9.9\t\t\tc-3.8,14.7-9.6,28.8-17.4,41.9c-2.7,4.6-2.5,10.3,0.6,14.7l24.7,34.8c0.7,1,0.6,2.5-0.3,3.4l-29.8,29.8c-0.7,0.7-1.4,0.8-1.9,0.8\t\t\tc-0.6,0-1.1-0.2-1.5-0.5l-34.7-24.7c-4.3-3.1-10.1-3.3-14.7-0.6c-13.1,7.8-27.2,13.6-41.9,17.4c-5.2,1.3-9.1,5.6-9.9,10.8l-7.1,42\t\t\tc-0.2,1.3-1.3,2.2-2.6,2.2h-42.1c-1.3,0-2.4-0.9-2.6-2.2l-7-42c-0.9-5.3-4.8-9.5-9.9-10.8c-14.3-3.7-28.1-9.4-41-16.8\t\t\tc-2.1-1.2-4.5-1.8-6.8-1.8c-2.7,0-5.5,0.8-7.8,2.5l-35,24.9c-0.5,0.3-1,0.5-1.5,0.5c-0.4,0-1.2-0.1-1.9-0.8l-29.8-29.8\t\t\tc-0.9-0.9-1-2.3-0.3-3.4l24.6-34.5c3.1-4.4,3.3-10.2,0.6-14.8c-7.8-13-13.8-27.1-17.6-41.8c-1.4-5.1-5.6-9-10.8-9.9l-42.3-7.2\t\t\tc-1.3-0.2-2.2-1.3-2.2-2.6v-42.1c0-1.3,0.9-2.4,2.2-2.6l41.7-7c5.3-0.9,9.6-4.8,10.9-10c3.7-14.7,9.4-28.9,17.1-42\t\t\tc2.7-4.6,2.4-10.3-0.7-14.6l-24.9-35c-0.7-1-0.6-2.5,0.3-3.4l29.8-29.8c0.7-0.7,1.4-0.8,1.9-0.8c0.6,0,1.1,0.2,1.5,0.5l34.5,24.6\t\t\tc4.4,3.1,10.2,3.3,14.8,0.6c13-7.8,27.1-13.8,41.8-17.6c5.1-1.4,9-5.6,9.9-10.8l7.2-42.3c0.2-1.3,1.3-2.2,2.6-2.2h42.1\t\t\tc1.3,0,2.4,0.9,2.6,2.2l7,41.7c0.9,5.3,4.8,9.6,10,10.9c15.1,3.8,29.5,9.7,42.9,17.6c4.6,2.7,10.3,2.5,14.7-0.6l34.5-24.8\t\t\tc0.5-0.3,1-0.5,1.5-0.5c0.4,0,1.2,0.1,1.9,0.8l29.8,29.8c0.9,0.9,1,2.3,0.3,3.4l-24.7,34.7c-3.1,4.3-3.3,10.1-0.6,14.7\t\t\tc7.8,13.1,13.6,27.2,17.4,41.9c1.3,5.2,5.6,9.1,10.8,9.9l42,7.1c1.3,0.2,2.2,1.3,2.2,2.6v42.1H451.9z");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M239.4,136.001c-57,0-103.3,46.3-103.3,103.3s46.3,103.3,103.3,103.3s103.3-46.3,103.3-103.3S296.4,136.001,239.4,136.001z M239.4,315.601c-42.1,0-76.3-34.2-76.3-76.3s34.2-76.3,76.3-76.3s76.3,34.2,76.3,76.3S281.5,315.601,239.4,315.601z"),t.appendChild(e),t.appendChild(s)}return this._settingsIcon}}class x{get rootElement(){return this._rootElement||(this._rootElement=document.createElement("button"),this._rootElement.type="button",this._rootElement.classList.add("UiTool"),this._rootElement.id="statsBtn",this._rootElement.appendChild(this.statsIcon),this._rootElement.appendChild(this.tooltipText)),this._rootElement}get tooltipText(){return this._tooltipText||(this._tooltipText=document.createElement("span"),this._tooltipText.classList.add("tooltiptext"),this._tooltipText.innerHTML="Information"),this._tooltipText}get statsIcon(){if(!this._statsIcon){this._statsIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._statsIcon.setAttributeNS(null,"id","statsIcon"),this._statsIcon.setAttributeNS(null,"x","0px"),this._statsIcon.setAttributeNS(null,"y","0px"),this._statsIcon.setAttributeNS(null,"viewBox","0 0 330 330");const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add("svgIcon"),this._statsIcon.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M165,0.008C74.019,0.008,0,74.024,0,164.999c0,90.977,74.019,164.992,165,164.992s165-74.015,165-164.992C330,74.024,255.981,0.008,165,0.008z M165,299.992c-74.439,0-135-60.557-135-134.992S90.561,30.008,165,30.008s135,60.557,135,134.991C300,239.436,239.439,299.992,165,299.992z");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M165,130.008c-8.284,0-15,6.716-15,15v99.983c0,8.284,6.716,15,15,15s15-6.716,15-15v-99.983C180,136.725,173.284,130.008,165,130.008z");const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d","M165,70.011c-3.95,0-7.811,1.6-10.61,4.39c-2.79,2.79-4.39,6.66-4.39,10.61s1.6,7.81,4.39,10.61c2.79,2.79,6.66,4.39,10.61,4.39s7.81-1.6,10.609-4.39c2.79-2.8,4.391-6.66,4.391-10.61s-1.601-7.82-4.391-10.61C172.81,71.61,168.95,70.011,165,70.011z"),t.appendChild(e),t.appendChild(s),t.appendChild(i)}return this._statsIcon}}class w{get rootElement(){return this._rootElement||(this._rootElement=document.createElement("button"),this._rootElement.type="button",this._rootElement.classList.add("UiTool"),this._rootElement.id="xrBtn",this._rootElement.appendChild(this.xrIcon),this._rootElement.appendChild(this.tooltipText)),this._rootElement}get tooltipText(){return this._tooltipText||(this._tooltipText=document.createElement("span"),this._tooltipText.classList.add("tooltiptext"),this._tooltipText.innerHTML="XR"),this._tooltipText}get xrIcon(){if(!this._xrIcon){this._xrIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._xrIcon.setAttributeNS(null,"id","xrIcon"),this._xrIcon.setAttributeNS(null,"x","0px"),this._xrIcon.setAttributeNS(null,"y","0px"),this._xrIcon.setAttributeNS(null,"viewBox","0 0 100 100");const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add("svgIcon"),this._xrIcon.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M29 41c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 14c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zm42-14c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 14c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zm12-31H17c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h14.5c3.5 0 6.8-1.5 9-4.1l3.5-4c1.5-1.7 3.7-2.7 6-2.7s4.5 1 6 2.7l3.5 4c2.3 2.6 5.6 4.1 9 4.1H83c6.6 0 12-5.4 12-12V36c0-6.6-5.4-12-12-12zm8 40c0 4.4-3.6 8-8 8H68.5c-2.3 0-4.5-1-6-2.7l-3.5-4c-2.3-2.6-5.6-4.1-9-4.1-3.5 0-6.8 1.5-9 4.1l-3.5 4C36 71 33.8 72 31.5 72H17c-4.4 0-8-3.6-8-8V36c0-4.4 3.6-8 8-8h66c4.4 0 8 3.6 8 8v28z"),t.appendChild(e)}return this._xrIcon}}function T(t){return!t||!!t&&t.isEnabled}function L(t){return null==t||t.creationMode===c.CreateDefaultElement}!function(t){t[t.CreateDefaultElement=0]="CreateDefaultElement",t[t.UseCustomElement=1]="UseCustomElement",t[t.Disable=2]="Disable"}(c||(c={}));class _{constructor(t){t&&!L(t.statsButtonType)||(this.statsIcon=new x),t&&!L(t.settingsButtonType)||(this.settingsIcon=new S),t&&!L(t.fullscreenButtonType)||(this.fullscreenIcon=new f),t&&!L(t.xrIconType)||(this.xrIcon=new w)}get rootElement(){return this._rootElement||(this._rootElement=document.createElement("div"),this._rootElement.id="controls",this.fullscreenIcon&&this._rootElement.appendChild(this.fullscreenIcon.rootElement),this.settingsIcon&&this._rootElement.appendChild(this.settingsIcon.rootElement),this.statsIcon&&this._rootElement.appendChild(this.statsIcon.rootElement),this.xrIcon&&l.WebXRController.isSessionSupported("immersive-vr").then((t=>{t&&this._rootElement.appendChild(this.xrIcon.rootElement)}))),this._rootElement}}class I{constructor(t,e){this._label=t,this._buttonText=e}addOnClickListener(t){this.button.addEventListener("click",t)}get button(){return this._button||(this._button=document.createElement("input"),this._button.type="button",this._button.value=this._buttonText,this._button.classList.add("overlay-button"),this._button.classList.add("btn-flat")),this._button}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.classList.add("setting");const t=document.createElement("div");t.innerText=this._label,this._rootElement.appendChild(t);const e=document.createElement("label");e.classList.add("btn-overlay"),this._rootElement.appendChild(e),e.appendChild(this.button)}return this._rootElement}}class k{constructor(){this._rootElement=null}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.id="settings-panel",this._rootElement.classList.add("panel-wrap");const t=document.createElement("div");t.classList.add("panel"),this._rootElement.appendChild(t);const e=document.createElement("div");e.id="settingsHeading",e.textContent="Settings",t.appendChild(e),t.appendChild(this.settingsCloseButton),t.appendChild(this.settingsContentElement)}return this._rootElement}get settingsContentElement(){return this._settingsContentElement||(this._settingsContentElement=document.createElement("div"),this._settingsContentElement.id="settingsContent"),this._settingsContentElement}get settingsCloseButton(){return this._settingsCloseButton||(this._settingsCloseButton=document.createElement("div"),this._settingsCloseButton.id="settingsClose"),this._settingsCloseButton}show(){this.rootElement.classList.contains("panel-wrap-visible")||this.rootElement.classList.add("panel-wrap-visible")}toggleVisibility(){this.rootElement.classList.toggle("panel-wrap-visible")}hide(){this.rootElement.classList.contains("panel-wrap-visible")&&this.rootElement.classList.remove("panel-wrap-visible")}}class P{get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("section"),this._rootElement.classList.add("settingsContainer");const t=document.createElement("div");t.id="latencyTestHeader",t.classList.add("settings-text"),t.classList.add("settingsHeader"),this._rootElement.appendChild(t);const e=document.createElement("div");e.innerHTML="Latency Test",t.appendChild(e),t.appendChild(this.latencyTestButton);const s=document.createElement("div");s.id="latencyTestContainer",s.classList.add("d-none"),this._rootElement.appendChild(s),s.appendChild(this.latencyTestResultsElement)}return this._rootElement}get latencyTestResultsElement(){return this._latencyTestResultsElement||(this._latencyTestResultsElement=document.createElement("div"),this._latencyTestResultsElement.id="latencyStatsResults",this._latencyTestResultsElement.classList.add("StatsResult")),this._latencyTestResultsElement}get latencyTestButton(){return this._latencyTestButton||(this._latencyTestButton=document.createElement("input"),this._latencyTestButton.type="button",this._latencyTestButton.value="Run Test",this._latencyTestButton.id="btn-start-latency-test",this._latencyTestButton.classList.add("streamTools-button"),this._latencyTestButton.classList.add("btn-flat")),this._latencyTestButton}handleTestResult(t){l.Logger.Log(l.Logger.GetStackTrace(),t.toString(),6);let e="";e+="<div>Net latency RTT (ms): "+t.networkLatency+"</div>",e+="<div>UE Encode (ms): "+t.EncodeMs+"</div>",e+="<div>UE Capture (ms): "+t.CaptureToSendMs+"</div>",e+="<div>Browser send latency (ms): "+t.browserSendLatency+"</div>",e+=t.frameDisplayDeltaTimeMs&&t.browserReceiptTimeMs?"<div>Browser receive latency (ms): "+t.frameDisplayDeltaTimeMs+"</div>":"",e+="<div>Total latency (excluding browser) (ms): "+t.latencyExcludingDecode+"</div>",e+=t.endToEndLatency?"<div>Total latency (ms): "+t.endToEndLatency+"</div>":"",this.latencyTestResultsElement.innerHTML=e}}class F{static formatBytes(t,e){if(0===t)return"0";const s=e<0?0:e,i=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,i)).toFixed(s))+" "+["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][i]}}class A{get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("section"),this._rootElement.classList.add("settingsContainer");const t=document.createElement("div");t.id="dataChannelLatencyTestHeader",t.classList.add("settings-text"),t.classList.add("settingsHeader"),this._rootElement.appendChild(t);const e=document.createElement("div");e.innerHTML="Data Channel Latency Test",t.appendChild(e),t.appendChild(this.latencyTestButton);const s=document.createElement("div");s.id="dataChannelLatencyTestContainer",s.classList.add("d-none"),this._rootElement.appendChild(s),s.appendChild(this.latencyTestResultsElement)}return this._rootElement}get latencyTestResultsElement(){return this._latencyTestResultsElement||(this._latencyTestResultsElement=document.createElement("div"),this._latencyTestResultsElement.id="dataChannelLatencyStatsResults",this._latencyTestResultsElement.classList.add("StatsResult")),this._latencyTestResultsElement}get latencyTestButton(){return this._latencyTestButton||(this._latencyTestButton=document.createElement("input"),this._latencyTestButton.type="button",this._latencyTestButton.value="Run Test",this._latencyTestButton.id="btn-start-data-channel-latency-test",this._latencyTestButton.classList.add("streamTools-button"),this._latencyTestButton.classList.add("btn-flat")),this._latencyTestButton}handleTestResult(t){if(l.Logger.Log(l.Logger.GetStackTrace(),t.toString(),6),isNaN(t.dataChannelRtt))return void(this.latencyTestResultsElement.innerHTML="<div>Not supported</div>");let e="";e+="<div>Data channel RTT (ms): "+t.dataChannelRtt+"</div>",t.playerToStreamerTime>=0&&t.streamerToPlayerTime>=0&&(e+="<div>Player to Streamer path (ms): "+t.playerToStreamerTime+"</div>",e+="<div>Streamer to Player path (ms): "+t.streamerToPlayerTime+"</div>"),this.latencyTestResultsElement.innerHTML=e;let s=document.createElement("input");s.type="button",s.value="Download",s.classList.add("streamTools-button"),s.classList.add("btn-flat"),s.onclick=()=>{let e=new Blob([t.exportLatencyAsCSV()],{type:"text/plain"}),s=document.createElement("a"),i=URL.createObjectURL(e);s.href=i,s.download="data_channel_latency_test_results.csv",document.body.appendChild(s),s.click(),setTimeout((function(){document.body.removeChild(s),window.URL.revokeObjectURL(i)}),0)},this.latencyTestResultsElement.appendChild(s)}handleTestStart(){this.latencyTestResultsElement.innerHTML="<div>Test in progress</div>"}}class R{}class O{constructor(){this.statsMap=new Map,this.latencyTest=new P,this.dataChannelLatencyTest=new A}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.id="stats-panel",this._rootElement.classList.add("panel-wrap");const t=document.createElement("div");t.classList.add("panel"),this._rootElement.appendChild(t);const e=document.createElement("div");e.id="statsHeading",e.textContent="Information",t.appendChild(e),t.appendChild(this.statsCloseButton),t.appendChild(this.statsContentElement)}return this._rootElement}get statsContentElement(){if(!this._statsContentElement){this._statsContentElement=document.createElement("div"),this._statsContentElement.id="statsContent";const t=document.createElement("div");t.id="streamToolsStats",t.classList.add("container");const e=document.createElement("div");e.id="ControlStats",e.classList.add("row");const s=document.createElement("section");s.id="statistics",s.classList.add("settingsContainer");const i=document.createElement("div");i.id="statisticsHeader",i.classList.add("settings-text"),i.classList.add("settingsHeader");const n=document.createElement("div");n.innerHTML="Session Stats",this._statsContentElement.appendChild(t),t.appendChild(e),e.appendChild(s),s.appendChild(i),i.appendChild(n),s.appendChild(this.statisticsContainer),e.appendChild(this.latencyTest.rootElement),e.appendChild(this.dataChannelLatencyTest.rootElement)}return this._statsContentElement}get statisticsContainer(){return this._statisticsContainer||(this._statisticsContainer=document.createElement("div"),this._statisticsContainer.id="statisticsContainer",this._statisticsContainer.classList.add("d-none"),this._statisticsContainer.appendChild(this.statsResult)),this._statisticsContainer}get statsResult(){return this._statsResult||(this._statsResult=document.createElement("div"),this._statsResult.id="statisticsResult",this._statsResult.classList.add("StatsResult")),this._statsResult}get statsCloseButton(){return this._statsCloseButton||(this._statsCloseButton=document.createElement("div"),this._statsCloseButton.id="statsClose"),this._statsCloseButton}onDisconnect(){this.latencyTest.latencyTestButton.onclick=()=>{},this.dataChannelLatencyTest.latencyTestButton.onclick=()=>{}}onVideoInitialized(t){this.latencyTest.latencyTestButton.onclick=()=>{t.requestLatencyTest()},this.dataChannelLatencyTest.latencyTestButton.onclick=()=>{t.requestDataChannelLatencyTest({duration:1e3,rps:10,requestSize:200,responseSize:200})&&this.dataChannelLatencyTest.handleTestStart()}}configure(t){t.DisableLatencyTest&&(this.latencyTest.latencyTestButton.disabled=!0,this.latencyTest.latencyTestButton.title="Disabled by -PixelStreamingDisableLatencyTester=true",this.dataChannelLatencyTest.latencyTestButton.disabled=!0,this.dataChannelLatencyTest.latencyTestButton.title="Disabled by -PixelStreamingDisableLatencyTester=true",l.Logger.Info(l.Logger.GetStackTrace(),"-PixelStreamingDisableLatencyTester=true, requesting latency report from the the browser to UE is disabled."))}show(){this.rootElement.classList.contains("panel-wrap-visible")||this.rootElement.classList.add("panel-wrap-visible")}toggleVisibility(){this.rootElement.classList.toggle("panel-wrap-visible")}hide(){this.rootElement.classList.contains("panel-wrap-visible")&&this.rootElement.classList.remove("panel-wrap-visible")}handlePlayerCount(t){this.addOrUpdateStat("PlayerCountStat","Players",t.toString())}handleStats(t){var e,s,i,n,o;const a=new Intl.NumberFormat(window.navigator.language,{maximumFractionDigits:0}),r=F.formatBytes(t.inboundVideoStats.bytesReceived,2);this.addOrUpdateStat("InboundDataStat","Received",r);const c=Object.prototype.hasOwnProperty.call(t.inboundVideoStats,"packetsLost")?a.format(t.inboundVideoStats.packetsLost):"Chrome only";this.addOrUpdateStat("PacketsLostStat","Packets Lost",c),t.inboundVideoStats.bitrate&&this.addOrUpdateStat("VideoBitrateStat","Video Bitrate (kbps)",t.inboundVideoStats.bitrate.toString()),t.inboundAudioStats.bitrate&&this.addOrUpdateStat("AudioBitrateStat","Audio Bitrate (kbps)",t.inboundAudioStats.bitrate.toString());const d=Object.prototype.hasOwnProperty.call(t.inboundVideoStats,"frameWidth")&&t.inboundVideoStats.frameWidth&&Object.prototype.hasOwnProperty.call(t.inboundVideoStats,"frameHeight")&&t.inboundVideoStats.frameHeight?t.inboundVideoStats.frameWidth+"x"+t.inboundVideoStats.frameHeight:"Chrome only";this.addOrUpdateStat("VideoResStat","Video resolution",d);const h=Object.prototype.hasOwnProperty.call(t.inboundVideoStats,"framesDecoded")?a.format(t.inboundVideoStats.framesDecoded):"Chrome only";this.addOrUpdateStat("FramesDecodedStat","Frames Decoded",h),t.inboundVideoStats.framesPerSecond&&this.addOrUpdateStat("FramerateStat","Framerate",t.inboundVideoStats.framesPerSecond.toString()),this.addOrUpdateStat("FramesDroppedStat","Frames dropped",null===(e=t.inboundVideoStats.framesDropped)||void 0===e?void 0:e.toString()),t.inboundVideoStats.codecId&&this.addOrUpdateStat("VideoCodecStat","Video codec",null!==(i=null===(s=t.codecs.get(t.inboundVideoStats.codecId))||void 0===s?void 0:s.split(" ")[0])&&void 0!==i?i:""),t.inboundAudioStats.codecId&&this.addOrUpdateStat("AudioCodecStat","Audio codec",null!==(o=null===(n=t.codecs.get(t.inboundAudioStats.codecId))||void 0===n?void 0:n.split(" ")[0])&&void 0!==o?o:"");let m=null!=t.getActiveCandidatePair()?t.getActiveCandidatePair():new l.CandidatePairStats;const u=Object.prototype.hasOwnProperty.call(m,"currentRoundTripTime")&&t.isNumber(m.currentRoundTripTime)?a.format(1e3*m.currentRoundTripTime):"Can't calculate";this.addOrUpdateStat("RTTStat","Net RTT (ms)",u),this.addOrUpdateStat("DurationStat","Duration",t.sessionStats.runTime),this.addOrUpdateStat("ControlsInputStat","Controls stream input",t.sessionStats.controlsStreamInput),this.addOrUpdateStat("QPStat","Video quantization parameter",t.sessionStats.videoEncoderAvgQP.toString()),l.Logger.Log(l.Logger.GetStackTrace(),`--------- Stats ---------\n ${t}\n------------------------`,6)}addOrUpdateStat(t,e,s){const i=`${e}: ${s}`;if(this.statsMap.has(t)){const e=this.statsMap.get(t);void 0!==e&&(e.element.innerHTML=i)}else{const n=new R;n.id=t,n.stat=s,n.title=e,n.element=document.createElement("div"),n.element.innerHTML=i,this.statsResult.appendChild(n.element),this.statsMap.set(t,n)}}}class M{constructor(){this.videoEncoderAvgQP=-1,this.statsText="",this.color="",this.orangeQP=26,this.redQP=35}get rootElement(){return this._rootElement||(this._rootElement=document.createElement("div"),this._rootElement.id="connection",this._rootElement.classList.add("UiTool"),this._rootElement.appendChild(this.qualityStatus),this._rootElement.appendChild(this.qualityText),this.updateQpTooltip(-1)),this._rootElement}get qualityText(){return this._qualityText||(this._qualityText=document.createElement("span"),this._qualityText.id="qualityText",this._qualityText.classList.add("tooltiptext")),this._qualityText}get qualityStatus(){return this._qualityStatus||(this._qualityStatus=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._qualityStatus.setAttributeNS(null,"id","connectionStrength"),this._qualityStatus.setAttributeNS(null,"x","0px"),this._qualityStatus.setAttributeNS(null,"y","0px"),this._qualityStatus.setAttributeNS(null,"viewBox","0 0 494.45 494.45"),this.qualityStatus.appendChild(this.dot),this.qualityStatus.appendChild(this.middle),this.qualityStatus.appendChild(this.outer),this.qualityStatus.appendChild(this.inner)),this._qualityStatus}get dot(){return this._dot||(this._dot=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._dot.setAttributeNS(null,"id","dot"),this._dot.setAttributeNS(null,"cx","247.125"),this._dot.setAttributeNS(null,"cy","398.925"),this._dot.setAttributeNS(null,"r","35.3")),this._dot}get outer(){return this._outer||(this._outer=document.createElementNS("http://www.w3.org/2000/svg","path"),this._outer.setAttributeNS(null,"id","outer"),this._outer.setAttributeNS(null,"d","M467.925,204.625c-6.8,0-13.5-2.6-18.7-7.8c-111.5-111.4-292.7-111.4-404.1,0c-10.3,10.3-27.1,10.3-37.4,0s-10.3-27.1,0-37.4c64-64,149-99.2,239.5-99.2s175.5,35.2,239.5,99.2c10.3,10.3,10.3,27.1,0,37.4C481.425,202.025,474.625,204.625,467.925,204.625z")),this._outer}get middle(){return this._middle||(this._middle=document.createElementNS("http://www.w3.org/2000/svg","path"),this._middle.setAttributeNS(null,"id","middle"),this._middle.setAttributeNS(null,"d","M395.225,277.325c-6.8,0-13.5-2.6-18.7-7.8c-71.4-71.3-187.4-71.3-258.8,0c-10.3,10.3-27.1,10.3-37.4,0s-10.3-27.1,0-37.4c92-92,241.6-92,333.6,0c10.3,10.3,10.3,27.1,0,37.4C408.725,274.725,401.925,277.325,395.225,277.325z")),this._middle}get inner(){return this._inner||(this._inner=document.createElementNS("http://www.w3.org/2000/svg","path"),this._inner.setAttributeNS(null,"id","inner"),this._inner.setAttributeNS(null,"d","M323.625,348.825c-6.8,0-13.5-2.6-18.7-7.8c-15.4-15.4-36-23.9-57.8-23.9s-42.4,8.5-57.8,23.9c-10.3,10.3-27.1,10.3-37.4,0c-10.3-10.3-10.3-27.1,0-37.4c25.4-25.4,59.2-39.4,95.2-39.4s69.8,14,95.2,39.5c10.3,10.3,10.3,27.1,0,37.4C337.225,346.225,330.425,348.825,323.625,348.825z")),this._inner}blinkVideoQualityStatus(t){let e=t,s=1;const i=setInterval((()=>{s-=.1,this.qualityText.style.opacity=String(Math.abs(2*(s-.5))),s<=.1&&(0==--e?clearInterval(i):s=1)}),100/t)}updateQpTooltip(t){this.videoEncoderAvgQP=t,t>this.redQP?(this.color="red",this.blinkVideoQualityStatus(2),this.statsText=`<div style="color: ${this.color}">Poor encoding quality</div>`,this.outer.setAttributeNS(null,"fill","#3c3b40"),this.middle.setAttributeNS(null,"fill","#3c3b40"),this.inner.setAttributeNS(null,"fill",this.color),this.dot.setAttributeNS(null,"fill",this.color)):t>this.orangeQP?(this.color="orange",this.blinkVideoQualityStatus(1),this.statsText=`<div style="color: ${this.color}">Blocky encoding quality</div>`,this.outer.setAttributeNS(null,"fill","#3c3b40"),this.middle.setAttributeNS(null,"fill",this.color),this.inner.setAttributeNS(null,"fill",this.color),this.dot.setAttributeNS(null,"fill",this.color)):t<=0?(this.color="#b0b0b0",this.outer.setAttributeNS(null,"fill","#3c3b40"),this.middle.setAttributeNS(null,"fill","#3c3b40"),this.inner.setAttributeNS(null,"fill","#3c3b40"),this.dot.setAttributeNS(null,"fill","#3c3b40"),this.statsText=`<div style="color: ${this.color}">Not connected</div>`):(this.color="lime",this.qualityStatus.style.opacity="1",this.statsText=`<div style="color: ${this.color}">Clear encoding quality</div>`,this.outer.setAttributeNS(null,"fill",this.color),this.middle.setAttributeNS(null,"fill",this.color),this.inner.setAttributeNS(null,"fill",this.color),this.dot.setAttributeNS(null,"fill",this.color)),this.qualityText.innerHTML=this.statsText}}class N{constructor(t){this._setting=t}get setting(){return this._setting}get rootElement(){return this._rootElement||(this._rootElement=document.createElement("div")),this._rootElement}}class B extends N{constructor(t){super(t),this.label=t.label,this.flag=t.flag}get setting(){return this._setting}get settingsTextElem(){return this._settingsTextElem||(this._settingsTextElem=document.createElement("div"),this._settingsTextElem.innerText=this.setting._label,this._settingsTextElem.title=this.setting.description),this._settingsTextElem}get checkbox(){return this._checkbox||(this._checkbox=document.createElement("input"),this._checkbox.type="checkbox"),this._checkbox}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.id=this.setting.id,this._rootElement.classList.add("setting"),this._rootElement.appendChild(this.settingsTextElem);const t=document.createElement("label");t.classList.add("tgl-switch"),this._rootElement.appendChild(t),this.checkbox.title=this.setting.description,this.checkbox.classList.add("tgl"),this.checkbox.classList.add("tgl-flat");const e=document.createElement("div");e.classList.add("tgl-slider"),t.appendChild(this.checkbox),t.appendChild(e),this.checkbox.addEventListener("change",(()=>{this.setting.flag!==this.checkbox.checked&&(this.setting.flag=this.checkbox.checked,this.setting.updateURLParams())}))}return this._rootElement}set flag(t){this.checkbox.checked=t}get flag(){return this.checkbox.checked}set label(t){this.settingsTextElem.innerText=t}get label(){return this.settingsTextElem.innerText}}class z extends N{constructor(t){super(t),this.label=this.setting.label,this.number=this.setting.number}get setting(){return this._setting}get settingsTextElem(){return this._settingsTextElem||(this._settingsTextElem=document.createElement("label"),this._settingsTextElem.innerText=this.setting.label,this._settingsTextElem.title=this.setting.description),this._settingsTextElem}get spinner(){return this._spinner||(this._spinner=document.createElement("input"),this._spinner.type="number",this._spinner.min=this.setting.min.toString(),this._spinner.max=this.setting.max.toString(),this._spinner.value=this.setting.number.toString(),this._spinner.title=this.setting.description,this._spinner.classList.add("form-control")),this._spinner}get rootElement(){return this._rootElement||(this._rootElement=document.createElement("div"),this._rootElement.classList.add("setting"),this._rootElement.classList.add("form-group"),this._rootElement.appendChild(this.settingsTextElem),this._rootElement.appendChild(this.spinner),this.spinner.onchange=t=>{const e=t.target,s=Number.parseFloat(e.value);Number.isNaN(s)?(l.Logger.Warning(l.Logger.GetStackTrace(),`Could not parse value change into a valid number - value was ${e.value}, resetting value to ${this.setting.min}`),this.setting.number!==this.setting.min&&(this.setting.number=this.setting.min)):this.setting.number!==s&&(this.setting.number=s,this.setting.updateURLParams())}),this._rootElement}set number(t){this.spinner.value=this.setting.clamp(t).toString()}get number(){return+this.spinner.value}set label(t){this.settingsTextElem.innerText=t}get label(){return this.settingsTextElem.innerText}}class U extends N{constructor(t){super(t),this.label=this.setting.label,this.text=this.setting.text}get setting(){return this._setting}get settingsTextElem(){return this._settingsTextElem||(this._settingsTextElem=document.createElement("div"),this._settingsTextElem.innerText=this.setting.label,this._settingsTextElem.title=this.setting.description),this._settingsTextElem}get textbox(){return this._textbox||(this._textbox=document.createElement("input"),this._textbox.classList.add("form-control"),this._textbox.type="textbox"),this._textbox}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.id=this.setting.id,this._rootElement.classList.add("setting"),this._rootElement.appendChild(this.settingsTextElem);const t=document.createElement("label");this._rootElement.appendChild(t),this.textbox.title=this.setting.description,t.appendChild(this.textbox),this.textbox.addEventListener("input",(()=>{this.setting.text!==this.textbox.value&&(this.setting.text=this.textbox.value,this.setting.updateURLParams())}))}return this._rootElement}set text(t){this.textbox.value=t}get text(){return this.textbox.value}set label(t){this.settingsTextElem.innerText=t}get label(){return this.settingsTextElem.innerText}}class D extends N{constructor(t){super(t),this.label=this.setting.label,this.options=this.setting.options,this.selected=this.setting.selected}get setting(){return this._setting}get selector(){return this._selector||(this._selector=document.createElement("select"),this._selector.classList.add("form-control"),this._selector.classList.add("settings-option")),this._selector}get settingsTextElem(){return this._settingsTextElem||(this._settingsTextElem=document.createElement("div"),this._settingsTextElem.innerText=this.setting.label,this._settingsTextElem.title=this.setting.description),this._settingsTextElem}set label(t){this.settingsTextElem.innerText=t}get label(){return this.settingsTextElem.innerText}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.id=this.setting.id,this._rootElement.classList.add("setting"),this._rootElement.classList.add("form-group"),this._rootElement.appendChild(this.settingsTextElem);const t=document.createElement("label");this._rootElement.appendChild(t),this.selector.title=this.setting.description,t.appendChild(this.selector),this.selector.onchange=()=>{this.setting.selected!==this.selector.value&&(this.setting.selected=this.selector.value,this.setting.updateURLParams())}}return this._rootElement}set options(t){for(let t=this.selector.options.length-1;t>=0;t--)this.selector.remove(t);t.forEach((t=>{const e=document.createElement("option");e.value=t,e.innerHTML=t,this.selector.appendChild(e)}))}get options(){return[...this.selector.options].map((t=>t.value))}set selected(t){const e=this.options.filter((e=>-1!==e.indexOf(t)));e.length&&(this.selector.value=e[0])}get selected(){return this.selector.value}disable(){this.selector.disabled=!0}enable(){this.selector.disabled=!1}}const H="LightMode";class Q{constructor(t){this.customFlags=new Map,this.flagsUi=new Map,this.numericParametersUi=new Map,this.textParametersUi=new Map,this.optionParametersUi=new Map,this.createCustomUISettings(t.useUrlParams),this.registerSettingsUIComponents(t)}createCustomUISettings(t){this.customFlags.set(H,new l.SettingFlag(H,"Color Scheme: Dark Mode","Page styling will be either light or dark",!1,t,((t,e)=>{e.label=`Color Scheme: ${t?"Light":"Dark"} Mode`})))}registerSettingsUIComponents(t){for(const e of t.getFlags())this.flagsUi.set(e.id,new B(e));for(const t of Array.from(this.customFlags.values()))this.flagsUi.set(t.id,new B(t));for(const e of t.getTextSettings())this.textParametersUi.set(e.id,new U(e));for(const e of t.getNumericSettings())this.numericParametersUi.set(e.id,new z(e));for(const e of t.getOptionSettings())this.optionParametersUi.set(e.id,new D(e))}buildSectionWithHeading(t,e){const s=document.createElement("section");s.classList.add("settingsContainer");const i=document.createElement("div");return i.classList.add("settingsHeader"),i.classList.add("settings-text"),i.textContent=e,s.appendChild(i),t.appendChild(s),s}populateSettingsElement(t){const e=this.buildSectionWithHeading(t,"Pixel Streaming");this.addSettingText(e,this.textParametersUi.get(l.TextParameters.SignallingServerUrl)),this.addSettingOption(e,this.optionParametersUi.get(l.OptionParameters.StreamerId)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.AutoConnect)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.AutoPlayVideo)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.BrowserSendOffer)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.UseMic)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.StartVideoMuted)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.IsQualityController)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.ForceMonoAudio)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.ForceTURN)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.SuppressBrowserKeys)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.AFKDetection)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.WaitForStreamer)),this.addSettingNumeric(e,this.numericParametersUi.get(l.NumericParameters.AFKTimeoutSecs)),this.addSettingNumeric(e,this.numericParametersUi.get(l.NumericParameters.MaxReconnectAttempts)),this.addSettingNumeric(e,this.numericParametersUi.get(l.NumericParameters.StreamerAutoJoinInterval));const s=this.buildSectionWithHeading(t,"UI");this.addSettingFlag(s,this.flagsUi.get(l.Flags.MatchViewportResolution)),this.addSettingFlag(s,this.flagsUi.get(l.Flags.HoveringMouseMode)),this.addSettingFlag(s,this.flagsUi.get(H));const i=this.buildSectionWithHeading(t,"Input");this.addSettingFlag(i,this.flagsUi.get(l.Flags.KeyboardInput)),this.addSettingFlag(i,this.flagsUi.get(l.Flags.MouseInput)),this.addSettingFlag(i,this.flagsUi.get(l.Flags.TouchInput)),this.addSettingFlag(i,this.flagsUi.get(l.Flags.GamepadInput)),this.addSettingFlag(i,this.flagsUi.get(l.Flags.XRControllerInput));const n=this.buildSectionWithHeading(t,"Encoder");this.addSettingNumeric(n,this.numericParametersUi.get(l.NumericParameters.MinQP)),this.addSettingNumeric(n,this.numericParametersUi.get(l.NumericParameters.MaxQP));const o=this.optionParametersUi.get(l.OptionParameters.PreferredCodec);this.addSettingOption(n,this.optionParametersUi.get(l.OptionParameters.PreferredCodec)),o&&[...o.selector.options].map((t=>t.value)).includes("Only available on Chrome")&&o.disable();const a=this.buildSectionWithHeading(t,"WebRTC");this.addSettingNumeric(a,this.numericParametersUi.get(l.NumericParameters.WebRTCFPS)),this.addSettingNumeric(a,this.numericParametersUi.get(l.NumericParameters.WebRTCMinBitrate)),this.addSettingNumeric(a,this.numericParametersUi.get(l.NumericParameters.WebRTCMaxBitrate))}addSettingText(t,e){e&&(t.appendChild(e.rootElement),this.textParametersUi.set(e.setting.id,e))}addSettingFlag(t,e){e&&(t.appendChild(e.rootElement),this.flagsUi.set(e.setting.id,e))}addSettingNumeric(t,e){e&&(t.appendChild(e.rootElement),this.numericParametersUi.set(e.setting.id,e))}addSettingOption(t,e){e&&(t.appendChild(e.rootElement),this.optionParametersUi.set(e.setting.id,e))}onSettingsChanged({data:{id:t,target:e,type:s}}){if("flag"===s){const s=t,i=e,n=this.flagsUi.get(s);n&&(n.flag!==i.flag&&(n.flag=i.flag),n.label!==i.label&&(n.label=i.label))}else if("number"===s){const s=t,i=e,n=this.numericParametersUi.get(s);n&&(n.number!==i.number&&(n.number=i.number),n.label!==i.label&&(n.label=i.label))}else if("text"===s){const s=t,i=e,n=this.textParametersUi.get(s);n&&(n.text!==i.text&&(n.text=i.text),n.label!==i.label&&(n.label=i.label))}else if("option"===s){const s=t,i=e,n=this.optionParametersUi.get(s);if(n){const t=n.options,e=i.options;t.length===e.length&&t.every((t=>e.includes(t)))||(n.options=i.options),n.selected!==i.selected&&(n.selected=i.selected),n.label!==i.label&&(n.label=i.label)}}}addCustomFlagOnSettingChangedListener(t,e){this.customFlags.has(t)&&(this.customFlags.get(t).onChange=e)}setCustomFlagLabel(t,e){this.customFlags.has(t)?(this.customFlags.get(t).label=e,this.flagsUi.get(t).label=e):l.Logger.Warning(l.Logger.GetStackTrace(),`Cannot set label for flag called ${t} - it does not exist in the Config.flags map.`)}isCustomFlagEnabled(t){return this.customFlags.get(t).flag}}class W{constructor(t){this._options=t,this.stream=t.stream,this.onColorModeChanged=t.onColorModeChanged,this.configUI=new Q(this.stream.config),this.createOverlays(),T(t.statsPanelConfig)&&(this.statsPanel=new O,this.uiFeaturesElement.appendChild(this.statsPanel.rootElement)),T(t.settingsPanelConfig)&&(this.settingsPanel=new k,this.uiFeaturesElement.appendChild(this.settingsPanel.rootElement),this.configureSettings()),t.videoQpIndicatorConfig&&t.videoQpIndicatorConfig.disableIndicator||(this.videoQpIndicator=new M,this.uiFeaturesElement.appendChild(this.videoQpIndicator.rootElement)),this.createButtons(),this.registerCallbacks(),this.showConnectOrAutoConnectOverlays(),this.setColorMode(this.configUI.isCustomFlagEnabled(H)),this.stream.config._addOnSettingChangedListener(l.Flags.HideUI,(t=>{this._uiFeatureElement.style.visibility=t?"hidden":"visible"})),this.stream.config.isFlagEnabled(l.Flags.HideUI)&&(this._uiFeatureElement.style.visibility="hidden")}createOverlays(){this.disconnectOverlay=new u(this.stream.videoElementParent),this.connectOverlay=new m(this.stream.videoElementParent),this.playOverlay=new g(this.stream.videoElementParent),this.infoOverlay=new E(this.stream.videoElementParent),this.errorOverlay=new v(this.stream.videoElementParent),this.afkOverlay=new b(this.stream.videoElementParent),this.disconnectOverlay.onAction((()=>this.stream.reconnect())),this.connectOverlay.onAction((()=>this.stream.connect())),this.playOverlay.onAction((()=>this.stream.play()))}createButtons(){const t={statsButtonType:this._options.statsPanelConfig?this._options.statsPanelConfig.visibilityButtonConfig:void 0,settingsButtonType:this._options.settingsPanelConfig?this._options.settingsPanelConfig.visibilityButtonConfig:void 0,fullscreenButtonType:this._options.fullScreenControlsConfig,xrIconType:this._options.xrControlsConfig},e=new _(t);this.uiFeaturesElement.appendChild(e.rootElement);const s=this._options.fullScreenControlsConfig&&this._options.fullScreenControlsConfig.creationMode===c.UseCustomElement?new C(this._options.fullScreenControlsConfig.customElement):e.fullscreenIcon;s&&(s.fullscreenElement=/iPad|iPhone|iPod/.test(navigator.userAgent)?this.stream.videoElementParent.getElementsByTagName("video")[0]:this.rootElement);const i=e.settingsIcon?e.settingsIcon.rootElement:this._options.settingsPanelConfig.visibilityButtonConfig.customElement;i&&(i.onclick=()=>this.settingsClicked()),this.settingsPanel&&(this.settingsPanel.settingsCloseButton.onclick=()=>this.settingsClicked());const n=e.xrIcon?e.xrIcon.rootElement:this._options.xrControlsConfig.creationMode===c.UseCustomElement?this._options.xrControlsConfig.customElement:void 0;n&&(n.onclick=()=>this.stream.toggleXR());const o=e.statsIcon?e.statsIcon.rootElement:this._options.statsPanelConfig.visibilityButtonConfig.customElement;if(o&&(o.onclick=()=>this.statsClicked()),this.statsPanel&&(this.statsPanel.statsCloseButton.onclick=()=>this.statsClicked()),this.settingsPanel){const t=new I("Show FPS","Toggle");t.addOnClickListener((()=>{this.stream.requestShowFps()}));const e=new I("Restart Stream","Restart");e.addOnClickListener((()=>{this.stream.reconnect()}));const s=new I("Request keyframe","Request");s.addOnClickListener((()=>{this.stream.requestIframe()}));const i=this.configUI.buildSectionWithHeading(this.settingsPanel.settingsContentElement,"Commands");i.appendChild(t.rootElement),i.appendChild(s.rootElement),i.appendChild(e.rootElement)}}configureSettings(){this.configUI.populateSettingsElement(this.settingsPanel.settingsContentElement),this.configUI.addCustomFlagOnSettingChangedListener(H,(t=>{this.configUI.setCustomFlagLabel(H,`Color Scheme: ${t?"Light":"Dark"} Mode`),this.setColorMode(t)}))}registerCallbacks(){this.stream.addEventListener("afkWarningActivate",(({data:{countDown:t,dismissAfk:e}})=>this.showAfkOverlay(t,e))),this.stream.addEventListener("afkWarningUpdate",(({data:{countDown:t}})=>this.afkOverlay.updateCountdown(t))),this.stream.addEventListener("afkWarningDeactivate",(()=>this.afkOverlay.hide())),this.stream.addEventListener("afkTimedOut",(()=>this.afkOverlay.hide())),this.stream.addEventListener("videoEncoderAvgQP",(({data:{avgQP:t}})=>this.onVideoEncoderAvgQP(t))),this.stream.addEventListener("webRtcSdp",(()=>this.onWebRtcSdp())),this.stream.addEventListener("webRtcAutoConnect",(()=>this.onWebRtcAutoConnect())),this.stream.addEventListener("webRtcConnecting",(()=>this.onWebRtcConnecting())),this.stream.addEventListener("webRtcConnected",(()=>this.onWebRtcConnected())),this.stream.addEventListener("webRtcFailed",(()=>this.onWebRtcFailed())),this.stream.addEventListener("webRtcDisconnected",(({data:{eventString:t,allowClickToReconnect:e}})=>this.onDisconnect(t,e))),this.stream.addEventListener("videoInitialized",(()=>this.onVideoInitialized())),this.stream.addEventListener("streamLoading",(()=>this.onStreamLoading())),this.stream.addEventListener("playStreamError",(({data:{message:t}})=>this.onPlayStreamError(t))),this.stream.addEventListener("playStream",(()=>this.onPlayStream())),this.stream.addEventListener("playStreamRejected",(({data:{reason:t}})=>this.onPlayStreamRejected(t))),this.stream.addEventListener("loadFreezeFrame",(({data:{shouldShowPlayOverlay:t}})=>this.onLoadFreezeFrame(t))),this.stream.addEventListener("statsReceived",(({data:{aggregatedStats:t}})=>this.onStatsReceived(t))),this.stream.addEventListener("latencyTestResult",(({data:{latencyTimings:t}})=>this.onLatencyTestResults(t))),this.stream.addEventListener("dataChannelLatencyTestResult",(({data:{result:t}})=>this.onDataChannelLatencyTestResults(t))),this.stream.addEventListener("streamerListMessage",(({data:{messageStreamerList:t,autoSelectedStreamerId:e,wantedStreamerId:s}})=>this.handleStreamerListMessage(t,e,s))),this.stream.addEventListener("settingsChanged",(t=>this.configUI.onSettingsChanged(t))),this.stream.addEventListener("playerCount",(({data:{count:t}})=>this.onPlayerCount(t))),this.stream.addEventListener("webRtcTCPRelayDetected",(({})=>l.Logger.Warning(l.Logger.GetStackTrace(),"Stream quailty degraded due to network enviroment, stream is relayed over TCP.")))}get rootElement(){return this._rootElement||(this._rootElement=document.createElement("div"),this._rootElement.id="playerUI",this._rootElement.classList.add("noselect"),this._rootElement.appendChild(this.stream.videoElementParent),this._rootElement.appendChild(this.uiFeaturesElement)),this._rootElement}get uiFeaturesElement(){return this._uiFeatureElement||(this._uiFeatureElement=document.createElement("div"),this._uiFeatureElement.id="uiFeatures"),this._uiFeatureElement}showDisconnectOverlay(t){this.hideCurrentOverlay(),this.updateDisconnectOverlay(t),this.disconnectOverlay.show(),this.currentOverlay=this.disconnectOverlay}updateDisconnectOverlay(t){this.disconnectOverlay.update(t)}onDisconnectionAction(){this.disconnectOverlay.activate()}hideCurrentOverlay(){null!=this.currentOverlay&&(this.currentOverlay.hide(),this.currentOverlay=null)}showConnectOverlay(){this.hideCurrentOverlay(),this.connectOverlay.show(),this.currentOverlay=this.connectOverlay}showPlayOverlay(){this.hideCurrentOverlay(),this.playOverlay.show(),this.currentOverlay=this.playOverlay}showTextOverlay(t){this.hideCurrentOverlay(),this.infoOverlay.update(t),this.infoOverlay.show(),this.currentOverlay=this.infoOverlay}showErrorOverlay(t){this.hideCurrentOverlay(),this.errorOverlay.update(t),this.errorOverlay.show(),this.currentOverlay=this.errorOverlay}settingsClicked(){var t;null===(t=this.statsPanel)||void 0===t||t.hide(),this.settingsPanel.toggleVisibility()}statsClicked(){var t;null===(t=this.settingsPanel)||void 0===t||t.hide(),this.statsPanel.toggleVisibility()}onConnectAction(){this.connectOverlay.activate()}onPlayAction(){this.playOverlay.activate()}showAfkOverlay(t,e){this.hideCurrentOverlay(),this.afkOverlay.updateCountdown(t),this.afkOverlay.onAction((()=>e())),this.afkOverlay.show(),this.currentOverlay=this.afkOverlay}showConnectOrAutoConnectOverlays(){this.stream.config.isFlagEnabled(l.Flags.AutoConnect)||this.showConnectOverlay()}onWebRtcAutoConnect(){this.showTextOverlay("Auto Connecting Now")}onWebRtcSdp(){this.showTextOverlay("WebRTC Connection Negotiated")}onStreamLoading(){const t=document.createElement("span");t.className="visually-hidden",t.innerHTML="Loading...";const e=document.createElement("div");e.id="loading-spinner",e.className="spinner-border ms-2",e.setAttribute("role","status"),e.appendChild(t),this.showTextOverlay("Loading Stream "+e.outerHTML)}onDisconnect(t,e){var s;const i="Disconnected"+(t?`: ${t}`:"");e?this.showDisconnectOverlay(`${i} Click To Restart.`):this.showErrorOverlay(i),null===(s=this.statsPanel)||void 0===s||s.onDisconnect()}onWebRtcConnecting(){this.showTextOverlay("Starting connection to server, please wait")}onWebRtcConnected(){this.showTextOverlay("WebRTC connected, waiting for video")}onWebRtcFailed(){this.showErrorOverlay("Unable to setup video")}onLoadFreezeFrame(t){!0===t&&(l.Logger.Log(l.Logger.GetStackTrace(),"showing play overlay"),this.showPlayOverlay())}onPlayStream(){this.hideCurrentOverlay()}onPlayStreamError(t){this.showErrorOverlay(t)}onPlayStreamRejected(t){this.showPlayOverlay()}onVideoInitialized(){var t;this.stream.config.isFlagEnabled(l.Flags.AutoPlayVideo)||this.showPlayOverlay(),null===(t=this.statsPanel)||void 0===t||t.onVideoInitialized(this.stream)}onVideoEncoderAvgQP(t){this.videoQpIndicator&&this.videoQpIndicator.updateQpTooltip(t)}onInitialSettings(t){var e;t.PixelStreamingSettings&&(null===(e=this.statsPanel)||void 0===e||e.configure(t.PixelStreamingSettings))}onStatsReceived(t){var e;null===(e=this.statsPanel)||void 0===e||e.handleStats(t)}onLatencyTestResults(t){var e;null===(e=this.statsPanel)||void 0===e||e.latencyTest.handleTestResult(t)}onDataChannelLatencyTestResults(t){var e;null===(e=this.statsPanel)||void 0===e||e.dataChannelLatencyTest.handleTestResult(t)}onPlayerCount(t){var e;null===(e=this.statsPanel)||void 0===e||e.handlePlayerCount(t)}handleStreamerListMessage(t,e,s){const i=this.stream.config.isFlagEnabled(l.Flags.WaitForStreamer),n=this.stream.isReconnecting();let o=null,a=!0;e||(i&&s?n?(o=`Waiting for ${s} to become available.`,a=!1):(o=`Gave up waiting for ${s} to become available. Click to try again`,t.ids.length>0&&(o+=" or select a streamer from the settings menu."),a=!0):0==t.ids.length?n?(o="Waiting for a streamer to become available.",a=!1):(o="No streamers available. Click to try again.",a=!0):(o="Multiple streamers available. Select one from the settings menu.",a=!1),a?this.showDisconnectOverlay(o):this.showTextOverlay(o))}setColorMode(t){this.onColorModeChanged&&this.onColorModeChanged(t)}}const Z=(t=>{var e={};return n.d(e,t),e})({default:()=>e.default}),j=(t=>{var e={};return n.d(e,t),e})({default:()=>s.default}),X=(t=>{var e={};return n.d(e,t),e})({default:()=>i.default});class q{constructor(t){this.defaultLightModePalette={"--color0":"#e2e0dd80","--color1":"#FFFFFF","--color2":"#000000","--color3":"#0585fe","--color4":"#35b350","--color5":"#ffab00","--color6":"#e1e2dd","--color7":"#c3c4bf"},this.defaultDarkModePalette={"--color0":"#1D1F2280","--color1":"#000000","--color2":"#FFFFFF","--color3":"#0585fe","--color4":"#35b350","--color5":"#ffab00","--color6":"#1e1d22","--color7":"#3c3b40"},this.defaultStyles={":root":{"--color0":"#1D1F2280","--color1":"#000000","--color2":"#FFFFFF","--color3":"#0585fe","--color4":"#35b350","--color5":"#ffab00","--color6":"#1e1d22","--color7":"#3c3b40","--color8":"#41008c","--color9":"#3e0070","--color10":"#2e0052","--color11":"rgba(65,0,139,1)"},".noselect":{userSelect:"none"},"#playerUI":{width:"100%",height:"100%",position:"relative"},"#videoElementParent":{width:"100%",height:"100%",position:"absolute",backgroundColor:"var(--color1)"},"#uiFeatures":{width:"100%",height:"100%",zIndex:"30",position:"relative",color:"var(--color2)",pointerEvents:"none",overflow:"hidden"},".UiTool .tooltiptext":{visibility:"hidden",width:"auto",color:"var(--color2)",textAlign:"center",borderRadius:"15px",padding:"0px 10px",fontFamily:"'Montserrat', sans-serif",fontSize:"0.75rem",letterSpacing:"0.75px",position:"absolute",top:"0",transform:"translateY(25%)",left:"125%",zIndex:"20"},".UiTool:hover .tooltiptext":{visibility:"visible",backgroundColor:"var(--color7)"},"#connection .tooltiptext":{top:"125%",transform:"translateX(-25%)",left:"0",zIndex:"20",padding:"5px 10px"},"#connection":{position:"absolute",bottom:"8%",left:"5%",fontFamily:"'Michroma', sans-serif",height:"3rem",width:"3rem",pointerEvents:"all"},"#settings-panel .tooltiptext":{display:"block",top:"125%",transform:"translateX(-50%)",left:"0",zIndex:"20",padding:"5px 10px",border:"3px solid var(--color3)",width:"max-content",fallbacks:[{width:"max-content"},{border:"3px solid var(--color3)"},{padding:"5px 10px"},{zIndex:"20"},{left:"0"},{transform:"translateX(-50%)"},{top:"125%"},{display:"block"}]},"#controls":{position:"absolute",top:"3%",left:"2%",fontFamily:"'Michroma', sans-serif",pointerEvents:"all",display:"block"},"#controls>*":{marginBottom:"0.5rem",borderRadius:"50%",display:"block",height:"2rem",lineHeight:"1.75rem",padding:"0.5rem"},"#controls #additionalinfo":{textAlign:"center",fontFamily:"'Montserrat', sans-serif"},"#fullscreen-btn":{padding:"0.6rem !important"},"#minimizeIcon":{display:"none"},"#settingsBtn, #statsBtn":{cursor:"pointer"},"#uiFeatures button":{backgroundColor:"var(--color7)",border:"1px solid var(--color7)",color:"var(--color2)",position:"relative",width:"3rem",height:"3rem",padding:"0.5rem",textAlign:"center"},"#uiFeatures button:hover":{backgroundColor:"var(--color3)",border:"3px solid var(--color3)",transition:"0.25s ease",paddingLeft:"0.55rem",paddingTop:"0.55rem"},"#uiFeatures button:active":{border:"3px solid var(--color3)",backgroundColor:"var(--color7)",paddingLeft:"0.55rem",paddingTop:"0.55rem"},".btn-flat":{backgroundColor:"transparent",color:"var(--color2)",fontFamily:"'Montserrat'",fontWeight:"bold",border:"3px solid var(--color3)",borderRadius:"1rem",fontSize:"0.75rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",cursor:"pointer",textAlign:"center"},".btn-flat:hover":{backgroundColor:"var(--color3)",transition:"ease 0.3s"},".btn-flat:disabled":{background:"var(--color7)",borderColor:"var(--color3)",color:"var(--color3)",cursor:"default"},".btn-flat:active":{backgroundColor:"transparent"},".btn-flat:focus":{outline:"none"},"#uiFeatures img":{width:"100%",height:"100%"},".panel-wrap":{position:"absolute",top:"0",bottom:"0",right:"0",height:"100%",minWidth:"20vw",maxWidth:"90vw",transform:"translateX(100%)",transition:".3s ease-out",pointerEvents:"all",backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)",overflowY:"auto",overflowX:"hidden",backgroundColor:"var(--color0)"},".panel-wrap-visible":{transform:"translateX(0%)"},".panel":{overflowY:"auto",padding:"1em"},"#settingsHeading, #statsHeading":{display:"inline-block",fontSize:"2em",marginBlockStart:"0.67em",marginBlockEnd:"0.67em",marginInlineStart:"0px",marginInlineEnd:"0px",position:"relative",padding:"0 0 0 2rem"},"#settingsClose, #statsClose":{margin:"0.5rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingRight:"0.5rem",fontSize:"2em",float:"right"},"#settingsClose:after, #statsClose:after":{paddingLeft:"0.5rem",display:"inline-block",content:'"\\00d7"'},"#settingsClose:hover, #statsClose:hover":{color:"var(--color3)",transition:"ease 0.3s"},"#settingsContent, #statsContent":{marginLeft:"2rem",marginRight:"2rem"},".setting":{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"0.15rem 10px 0.15rem 10px"},".settings-text":{color:"var(--color2)",verticalAlign:"middle",fontWeight:"normal"},".settings-option":{width:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap"},"#connectOverlay, #playOverlay, #infoOverlay, #errorOverlay, #afkOverlay, #disconnectOverlay":{zIndex:"30",position:"absolute",color:"var(--color2)",fontSize:"1.8em",width:"100%",height:"100%",backgroundColor:"var(--color1)",alignItems:"center",justifyContent:"center",textTransform:"uppercase"},".clickableState":{alignItems:"center",justifyContent:"center",display:"flex",cursor:"pointer"},".textDisplayState":{display:"flex"},".hiddenState":{display:"none"},"#playButton, #connectButton":{display:"inline-block",height:"auto",zIndex:"30"},"img#playButton":{maxWidth:"241px",width:"10%"},"#uiInteraction":{position:"fixed"},"#UIInteractionButtonBoundary":{padding:"2px"},"#UIInteractionButton":{cursor:"pointer"},"#hiddenInput":{position:"absolute",left:"-10%",width:"0px",opacity:"0"},"#editTextButton":{position:"absolute",height:"40px",width:"40px"},".btn-overlay":{verticalAlign:"middle",display:"inline-block"},".tgl-switch":{verticalAlign:"middle",display:"inline-block"},".tgl-switch .tgl":{display:"none"},".tgl, .tgl:after, .tgl:before, .tgl *, .tgl *:after, .tgl *:before, .tgl+.tgl-slider":{"-webkit-box-sizing":"border-box",boxSizing:"border-box"},".tgl::-moz-selection, .tgl:after::-moz-selection, .tgl:before::-moz-selection, .tgl *::-moz-selection, .tgl *:after::-moz-selection, .tgl *:before::-moz-selection, .tgl+.tgl-slider::-moz-selection":{background:"none"},".tgl::selection, .tgl:after::selection, .tgl:before::selection, .tgl *::selection, .tgl *:after::selection, .tgl *:before::selection, .tgl+.tgl-slider::selection":{background:"none"},".tgl-slider":{},".tgl+.tgl-slider":{outline:"0",display:"block",width:"40px",height:"18px",position:"relative",cursor:"pointer",userSelect:"none"},".tgl+.tgl-slider:after, .tgl+.tgl-slider:before":{position:"relative",display:"block",content:'""',width:"50%",height:"100%"},".tgl+.tgl-slider:after":{left:"0"},".tgl+.tgl-slider:before":{display:"none"},".tgl-flat+.tgl-slider":{padding:"2px","-webkit-transition":"all .2s ease",transition:"all .2s ease",background:"var(--color6)",border:"3px solid var(--color7)",borderRadius:"2em"},".tgl-flat+.tgl-slider:after":{"-webkit-transition":"all .2s ease",transition:"all .2s ease",background:"var(--color7)",content:'""',borderRadius:"1em"},".tgl-flat:checked+.tgl-slider":{border:"3px solid var(--color3)"},".tgl-flat:checked+.tgl-slider:after":{left:"50%",background:"var(--color3)"},".btn-apply":{display:"block !important",marginLeft:"auto",marginRight:"auto",width:"40%"},".form-control":{backgroundColor:"var(--color7)",border:"2px solid var(--color7)",borderRadius:"4px",color:"var(--color2)",textAlign:"right",fontFamily:"inherit"},".form-control:hover":{borderColor:"var(--color7)"},".form-group":{paddingTop:"4px",display:"grid",gridTemplateColumns:"80% 20%",rowGap:"4px",paddingRight:"10px",paddingLeft:"10px"},".form-group label":{verticalAlign:"middle",fontWeight:"normal"},".settingsContainer":{display:"flex",flexDirection:"column",borderBottom:"1px solid var(--color7)",paddingTop:"10px",paddingBottom:"10px"},".settingsContainer> :first-child":{marginTop:"4px",marginBottom:"4px",fontWeight:"bold",justifyContent:"space-between",display:"flex",flexDirection:"row",alignItems:"baseline"},".collapse":{paddingLeft:"5%"},"#streamTools":{borderBottomRightRadius:"5px",borderBottomLeftRadius:"5px",userSelect:"none",position:"absolute",top:"0",right:"2%",zIndex:"100",border:"4px solid var(--colour8)",borderTopWidth:"0px"},".settingsHeader":{fontStyle:"italic"},"#streamToolsHeader":{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid var(--colour8)",backgroundColor:"var(--color7)"},".streamTools":{backgroundColor:"var(--color2)",fontFamily:"var(--buttonFont)",fontWeight:"lighter",color:"var(--color7)"},".streamTools-shown>#streamToolsSettings, .streamTools-shown>#streamToolsStats":{display:"block"},"#streamToolsToggle":{width:"100%"},"#qualityStatus":{fontSize:"37px",paddingRight:"4px"},".svgIcon":{fill:"var(--color2)"}};const{customStyles:e,lightModePalette:s,darkModePalette:i,jssInsertionPoint:n}=null!=t?t:{},o={plugins:[(0,j.default)(),(0,X.default)()],insertionPoint:n};Z.default.setup(o),this.customStyles=e,this.lightModePalette=null!=s?s:this.defaultLightModePalette,this.darkModePalette=null!=i?i:this.defaultDarkModePalette}applyStyleSheet(){Z.default.createStyleSheet({"@global":Object.assign(Object.assign({},this.defaultStyles),this.customStyles)}).attach()}applyPalette(t){const e=document.querySelector(":root");e.style.setProperty("--color0",t["--color0"]),e.style.setProperty("--color1",t["--color1"]),e.style.setProperty("--color2",t["--color2"]),e.style.setProperty("--color3",t["--color3"]),e.style.setProperty("--color4",t["--color4"]),e.style.setProperty("--color5",t["--color5"]),e.style.setProperty("--color6",t["--color6"]),e.style.setProperty("--color7",t["--color7"])}setColorMode(t){t?this.applyPalette(this.lightModePalette):this.applyPalette(this.darkModePalette)}}var V=o.ym,G=o.EW,J=o.Mx,Y=o.L3,K=o.rl,$=o.NR,tt=o.f1,et=o.IY,st=o.RZ,it=o.XY,nt=o.Fk,ot=o.Zh,lt=o.ek,at=o.MG,rt=o.gE,ct=o.tW,dt=o.wr,ht=o.QT;export{V as AFKOverlay,G as ActionOverlay,J as Application,Y as ConfigUI,K as ConnectOverlay,$ as DisconnectOverlay,tt as ErrorOverlay,et as InfoOverlay,st as OverlayBase,it as PixelStreamingApplicationStyle,nt as PlayOverlay,ot as SettingUIBase,lt as SettingUIFlag,at as SettingUINumber,rt as SettingUIOption,ct as SettingUIText,dt as TextOverlay,ht as UIElementCreationMode};